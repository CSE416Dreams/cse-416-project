<div *ngIf="!this.controller.isReady()">
  <mat-spinner class="spinner"></mat-spinner>
</div>


<div *ngIf="this.controller.isReady()">
  <button mat-raised-button (click)="backToSummary()" class="back-button">Back to Summary</button>
  <br>
  <mat-divider></mat-divider>

  <mat-tab-group>
    <mat-tab label="Basic Information">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title>
            Plan Information
          </mat-card-title>
        </mat-card-header>
        <mat-divider class="divider"></mat-divider>

        <mat-card-content>
          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>Plan Name :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getSelectedPlan() }}</div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>
            <mat-grid-tile>
              <div>Plan Status :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().planStatus }}</div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>Proposed By : </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().proposedBy }}</div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>

            <mat-grid-tile>
              <div># of Districts :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().districts.length }}</div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div *ngIf="this.controller.getCurrentPlanData().planStatus == 'Approved'">
                Date Approved :
              </div>
              <div *ngIf="this.controller.getCurrentPlanData().planStatus == 'Rejected'">
                Date Rejected :
              </div>
              <div *ngIf="this.controller.getCurrentPlanData().planStatus == 'Proposed'">
                Date Proposed :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().planDate }}
              </div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>

            <mat-grid-tile>
              <div>
                # of Majority-Minority Districts :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                  {{ this.controller.getCurrentPlanData().numOfMajorityMinorityDistricts }}
              </div>
            </mat-grid-tile>
          </mat-grid-list>

          <mat-divider></mat-divider>
          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>Average Polsby-Popper :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().avgPolsbyPopperValue.toFixed(4) }}</div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>
            <mat-grid-tile>
              <div>Efficiency Gap :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().efficiencyGap.toFixed(4) }}</div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>Equal Population Measure :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().eqPopMeasure.toFixed(4) }}</div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>
            <mat-grid-tile>
              <div>Mean-Median Diff :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().meanMedianDifference.toFixed(4) }}</div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div># of Split Counties :</div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">{{ this.controller.getCurrentPlanData().numSplitCounties }}</div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>

          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="1" rowHeight="40px">
            <mat-grid-tile>
              <div>Republican / Democratic Split :</div>
            </mat-grid-tile>
          </mat-grid-list>

          <mat-grid-list cols="1" rowHeight="80px">
            <mat-grid-tile>
              <div *ngFor="let split of this.controller.getRepDemSplit(this.controller.getCurrentPlanData()); index as i" [ngClass]="{'red-box' : split == 'red', 'blue-box' : split == 'blue'}">
              </div>
            </mat-grid-tile>
          </mat-grid-list>

        </mat-card-content>
      </mat-card>
    </mat-tab>

    <mat-tab label="Demographics">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title>
            State Demographics
          </mat-card-title>
        </mat-card-header>
        <mat-divider class="divider"></mat-divider>

        <mat-card-content>
          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>
                White :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[0] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[0].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>
            <mat-grid-tile>
              <div>
                African American :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[1] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[1].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>
          <mat-grid-list cols="2" rowHeight="40px">
            <mat-grid-tile>
              <div>
                Asian :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[2] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[2].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
              <mat-divider vertical style="height: 45px"></mat-divider>
            </mat-grid-tile>
            <mat-grid-tile>
              <div>
                Hispanic :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[3] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[3].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="1" rowHeight="40px">
            <mat-grid-tile>
              <div>
                American Indian & Alaska Native :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[4] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[4].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>

          <mat-grid-list cols="1" rowHeight="40px">
            <mat-grid-tile>
              <div>
                Native Hawaiian and Other Pacific Islander (OPI) :
              </div>
              <div style="display: flex; justify-content: flex-end; margin-right: 15px">
                {{ this.controller.getCurrentPlanData().demographicsTotals[5] != null ? 
                  this.controller.getCurrentPlanData().demographicsTotals[5].toLocaleString("en-US") : 
                  'Not Defined' }}
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-divider></mat-divider>
        </mat-card-content>

      </mat-card>
    </mat-tab>

    <mat-tab label="District Information">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title class="district-title">
            Summary of Each Districts
          </mat-card-title>
          <div class="spacer"></div>
          <div class="district-select-div">Currently Showing : </div>

          <button mat-raised-button [matMenuTriggerFor]="menu" yPosition="below" class="district-select">
            District {{ this.controller.getSelectedDistrict() }}
          </button>
          <mat-menu #menu="matMenu">
            <button
              mat-menu-item
              *ngFor="let district of this.controller.getCurrentPlanData().districts"
              (click)="this.controller.changeDistrict(district.districtNum)">
              District {{ district.districtNum }}
            </button>
          </mat-menu>

        </mat-card-header>
        <mat-divider class="divider"></mat-divider>

        <mat-card-content>

          <mat-card class="card">
            <mat-card-header>
              <div class="sub-title" style="font-weight: 550; font-size: large; text-align: left;">
                District Information
              </div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    District # : {{ this.controller.getCurrentDistrictData().districtNum }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                   Incumbent : {{ this.controller.getCurrentDistrictData().incumbent }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                   Total Population : {{ this.controller.getCurrentDistrictData().population }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                   Democratic Votes : {{ this.controller.getCurrentDistrictData().voteDem }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                   Republican Votes : {{ this.controller.getCurrentDistrictData().voteRep }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>


            </mat-card-content>
          </mat-card>

          <mat-card class="card">
            <mat-card-header>
              <div class="sub-title" style="font-weight: 550; font-size: large; text-align: left;">
                Demographics
              </div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-grid-list cols="1" rowHeight="40px">
              <mat-grid-tile>
                <div>
                  is Majority-Minority District : {{ this.controller.getCurrentDistrictData().MMD }}
                </div>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-divider></mat-divider>
            <mat-card-content>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    Asian : {{ this.controller.getCurrentDistrictData().demographics.asianPopulation }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    Black : {{ this.controller.getCurrentDistrictData().demographics.blackPopulation }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    Hispanic : {{ this.controller.getCurrentDistrictData().demographics.hispanicPopulation }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    White : {{ this.controller.getCurrentDistrictData().demographics.whitePopulation }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
            </mat-card-content>
          </mat-card>

          <mat-card class="card">
            <mat-card-header>
              <div class="sub-title" style="font-weight: 550; font-size: large; text-align: left;">
                Compactness
              </div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                    Polsby-Popper Value : {{ this.controller.getCurrentDistrictData().polsbyPopperValue.toFixed(4) }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>

              <mat-divider></mat-divider>
              <mat-grid-list cols="1" rowHeight="40px">
                <mat-grid-tile>
                  <div>
                   Schwartzberg Value : {{ this.controller.getCurrentDistrictData().schwartzbergValue.toFixed(4) }}
                  </div>
                </mat-grid-tile>
              </mat-grid-list>
              <mat-divider></mat-divider>
            </mat-card-content>
          </mat-card>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <mat-tab label="Seat/Vote Share">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title>
            Seat Share / Vote Share Plot
          </mat-card-title>
        </mat-card-header>
        <mat-divider class="divider"></mat-divider>

        <mat-card-content>

          <ngx-charts-line-chart
          [view]="view"
          [scheme]="colorScheme"
          [legend]="legend"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="showYAxisLabel"
          [xAxis]="xAxis"
          [yAxis]="yAxis"
          [xAxisLabel]="xAxisLabel"
          [yAxisLabel]="yAxisLabel"
          [timeline]="timeline"
          [results]="multi"
          (select)="onSelect($event)"
          (activate)="onActivate($event)"
          (deactivate)="onDeactivate($event)"
          >
        </ngx-charts-line-chart>

        </mat-card-content>
      </mat-card>
    </mat-tab>
    <!-- <mat-tab label="Box and whisker">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title>
            Box and Whisker
          </mat-card-title>
        </mat-card-header>
        <mat-divider class="divider"></mat-divider>

        <mat-card-content>
          <div id="chart">
            <apx-chart
              [series]="chartOptions.series"
              [chart]="chartOptions.chart"
              [plotOptions]="chartOptions.plotOptions"
              [title]="chartOptions.title"
            ></apx-chart>
          </div>


        </mat-card-content>
      </mat-card>
    </mat-tab> -->
  </mat-tab-group>




  <br>
  <br>

</div>
